import{c as ne,a as N,t as R}from"../chunks/EWt-O-rm.js";import{Z as Q,v as x,a5 as Ye,a7 as $e,W as Ve,m as Ke,h as k,K as Pe,X as Xe,Y as be,_ as ee,w as K,ai as ze,$ as Te,n as Se,a0 as Ge,at as Ie,am as De,I as We,N as Ze,A as ke,au as ae,ad as je,F as ye,av as ue,aw as Je,ax as ce,ay as pe,az as Qe,al as ea,aA as aa,q as ra,aB as ta,ag as sa,aC as na,aD as la,aE as oa,g as Oe,ap as Re,ao as Me,f as B,p as ve,c as O,s as D,r as S,t as de,a as fe,C as L,ar as F,d as we,aF as ia}from"../chunks/B8YfBEVM.js";import{a as ua,l as _e,d as qe,s as he}from"../chunks/DQ0XpW20.js";import{i as ge,s as Le,a as Ue}from"../chunks/D2aexS8S.js";import{i as ca,p as Z,a as U}from"../chunks/CXQtZGug.js";import{s as va}from"../chunks/Bo7A245V.js";import{c as Fe,d as re,e as W,g as xe,w as da,u as Ee}from"../chunks/C2Q5Xh33.js";function le(e,a){return a}function fa(e,a,r,s){for(var t=[],l=a.length,o=0;o<l;o++)Qe(a[o].e,t,!0);var d=l>0&&t.length===0&&r!==null;if(d){var p=r.parentNode;ea(p),p.append(r),s.clear(),q(e,a[0].prev,a[l-1].next)}aa(t,()=>{for(var m=0;m<l;m++){var f=a[m];d||(s.delete(f.k),q(e,f.prev,f.next)),ra(f.e,!d)}})}function oe(e,a,r,s,t,l=null){var o=e,d={flags:a,items:new Map,first:null},p=(a&Ie)!==0;if(p){var m=e;o=x?Q(Ye(m)):m.appendChild($e())}x&&Ve();var f=null,E=!1,c=Pe(()=>{var b=r();return We(b)?b:b==null?[]:De(b)});Ke(()=>{var b=k(c),i=b.length;if(E&&i===0)return;E=i===0;let y=!1;if(x){var v=o.data===Xe;v!==(i===0)&&(o=be(),Q(o),ee(!1),y=!0)}if(x){for(var _=null,h,g=0;g<i;g++){if(K.nodeType===8&&K.data===ze){o=K,y=!0,ee(!1);break}var n=b[g],u=s(n,g);h=He(K,d,_,null,n,u,g,t,a,r),d.items.set(u,h),_=h}i>0&&Q(be())}x||_a(b,d,o,t,a,s,r),l!==null&&(i===0?f?Te(f):f=Se(()=>l(o)):f!==null&&Ge(f,()=>{f=null})),y&&ee(!0),k(c)}),x&&(o=K)}function _a(e,a,r,s,t,l,o){var X,H,$,z;var d=(t&Je)!==0,p=(t&(ce|ue))!==0,m=e.length,f=a.items,E=a.first,c=E,b,i=null,y,v=[],_=[],h,g,n,u;if(d)for(u=0;u<m;u+=1)h=e[u],g=l(h,u),n=f.get(g),n!==void 0&&((X=n.a)==null||X.measure(),(y??(y=new Set)).add(n));for(u=0;u<m;u+=1){if(h=e[u],g=l(h,u),n=f.get(g),n===void 0){var M=c?c.e.nodes_start:r;i=He(M,a,i,i===null?a.first:i.next,h,g,u,s,t,o),f.set(g,i),v=[],_=[],c=i.next;continue}if(p&&ha(n,h,u,t),n.e.f&ae&&(Te(n.e),d&&((H=n.a)==null||H.unfix(),(y??(y=new Set)).delete(n))),n!==c){if(b!==void 0&&b.has(n)){if(v.length<_.length){var C=_[0],w;i=C.prev;var A=v[0],I=v[v.length-1];for(w=0;w<v.length;w+=1)Ae(v[w],C,r);for(w=0;w<_.length;w+=1)b.delete(_[w]);q(a,A.prev,I.next),q(a,i,A),q(a,I,C),c=C,i=I,u-=1,v=[],_=[]}else b.delete(n),Ae(n,c,r),q(a,n.prev,n.next),q(a,n,i===null?a.first:i.next),q(a,i,n),i=n;continue}for(v=[],_=[];c!==null&&c.k!==g;)c.e.f&ae||(b??(b=new Set)).add(c),_.push(c),c=c.next;if(c===null)continue;n=c}v.push(n),i=n,c=n.next}if(c!==null||b!==void 0){for(var T=b===void 0?[]:De(b);c!==null;)c.e.f&ae||T.push(c),c=c.next;var Y=T.length;if(Y>0){var j=t&Ie&&m===0?r:null;if(d){for(u=0;u<Y;u+=1)($=T[u].a)==null||$.measure();for(u=0;u<Y;u+=1)(z=T[u].a)==null||z.fix()}fa(a,T,j,f)}}d&&je(()=>{var V;if(y!==void 0)for(n of y)(V=n.a)==null||V.apply()}),ye.first=a.first&&a.first.e,ye.last=i&&i.e}function ha(e,a,r,s){s&ce&&pe(e.v,a),s&ue?pe(e.i,r):e.i=r}function He(e,a,r,s,t,l,o,d,p,m){var f=(p&ce)!==0,E=(p&ta)===0,c=f?E?Ze(t):ke(t):t,b=p&ue?ke(o):o,i={i:b,v:c,k:l,a:null,e:null,prev:r,next:s};try{return i.e=Se(()=>d(e,c,b,m),x),i.e.prev=r&&r.e,i.e.next=s&&s.e,r===null?a.first=i:(r.next=i,r.e.next=i.e),s!==null&&(s.prev=i,s.e.prev=i.e),i}finally{}}function Ae(e,a,r){for(var s=e.next?e.next.e.nodes_start:r,t=a?a.e.nodes_start:r,l=e.e.nodes_start;l!==s;){var o=sa(l);t.before(l),l=o}}function q(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function ie(e){if(x){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;Ne(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var t=e.checked;Ne(e,"checked",null),e.checked=t}}};e.__on_r=r,na(r),ua()}}function Ne(e,a,r,s){var t=e.__attributes??(e.__attributes={});x&&(t[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||t[a]!==(t[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[la]=r),e.removeAttribute(a))}function ga(e,a,r){var s=e.__className,t=ma(a);x&&e.className===t?e.__className=t:(s!==t||x&&e.className!==t)&&(e.className=t,e.__className=t)}function ma(e,a){return e+""}function Ce(e,a,r=a){var s=oa();_e(e,"input",t=>{var l=t?e.defaultValue:e.value;if(l=te(e)?se(l):l,r(l),s&&l!==(l=a())){var o=e.selectionStart,d=e.selectionEnd;e.value=l??"",d!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(d,e.value.length))}}),(x&&e.defaultValue!==e.value||Oe(a)==null&&e.value)&&r(te(e)?se(e.value):e.value),Re(()=>{var t=a();te(e)&&t===se(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function ba(e,a,r=a){_e(e,"change",s=>{var t=s?e.defaultChecked:e.checked;r(t)}),(x&&e.defaultChecked!==e.checked||Oe(a)==null)&&r(e.checked),Re(()=>{var s=a();e.checked=!!s})}function te(e){var a=e.type;return a==="number"||a==="range"}function se(e){return e===""?null:+e}function Be(e,a,r){if(e.multiple)return pa(e,a);for(var s of e.options){var t=P(s);if(ca(t,a)){s.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function ka(e,a){Me(()=>{var r=new MutationObserver(()=>{var s=e.__value;Be(e,s)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ya(e,a,r=a){var s=!0;_e(e,"change",t=>{var l=t?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(l),P);else{var d=e.querySelector(l)??e.querySelector("option:not([disabled])");o=d&&P(d)}r(o)}),Me(()=>{var t=a();if(Be(e,t,s),s&&t===void 0){var l=e.querySelector(":checked");l!==null&&(t=P(l),r(t))}e.__value=t,s=!1}),ka(e)}function pa(e,a){for(var r of e.options)r.selected=~a.indexOf(P(r))}function P(e){return"__value"in e?e.__value:e.value}var wa=R("<p>You must be loged in to access this page!!</p>");function xa(e,a){const[r,s]=Le(),t=()=>Ue(Fe,"$currentUser",r);var l=ne(),o=B(l);{var d=m=>{var f=ne(),E=B(f);va(E,()=>a.children),N(m,f)},p=m=>{var f=wa();N(m,f)};ge(o,m=>{t()?m(d):m(p,!1)})}N(e,l),s()}var Ea=(e,a)=>a.handleStatusChange(a.id,a.key),Aa=R('<button><input type="checkbox"> <span class="mx-2"> </span></button>');function Na(e,a){ve(a,!0);let r=Z(a,"value",7);var s=Aa();ga(s,"my-4 flex w-full flex-row items-center justify-start rounded-2xl border-[1px] border-black bg-white p-3 shadow-md shadow-black transition duration-300 ease-in hover:shadow-2xl"),s.__click=[Ea,a];var t=O(s);ie(t);var l=D(t,2),o=O(l,!0);S(l),S(s),de(()=>he(o,r().task)),ba(t,()=>r().status,d=>r().status=d),N(e,s),fe()}qe(["click"]);var Ca=(e,a)=>L(a,"category"),Ta=(e,a)=>L(a,"task"),Sa=(e,a)=>a(),Ia=R('<input type="text" name="task" class="input w-1/2" placeholder="add new category"> <button class="btn-add !w-1/4">Add Category</button>',1),Da=R("<option> </option>"),Oa=R('<select class="input w-1/4"><option disabled selected>select your category</option><!></select> <input type="text" name="task" class="input w-1/4" placeholder="start tracking..."> <button class="btn-add !w-1/4">Add Task</button>',1),Ra=R('<div class="m-2 flex flex-col items-center justify-evenly p-2 md:m-4 md:p-4"><div class="mb-4 flex w-full flex-row justify-around"><button class="btn-switch-2">Add New Category</button> <button class="btn-switch-2">Add Tasks</button></div> <hr class="w-full"> <div class="mt-4 flex w-full flex-col justify-evenly md:flex-row"><!></div></div>');function Ma(e,a){ve(a,!0);let r=Z(a,"sortedCategories",15),s=Z(a,"category",15),t=Z(a,"taskName",15),l=F("category"),o=F("");function d(){r([...r(),k(o)].sort())}var p=Ra(),m=O(p),f=O(m);f.__click=[Ca,l];var E=D(f,2);E.__click=[Ta,l],S(m);var c=D(m,4),b=O(c);{var i=v=>{var _=Ia(),h=B(_);ie(h);var g=D(h,2);g.__click=[Sa,d],Ce(h,()=>k(o),n=>L(o,n)),N(v,_)},y=v=>{var _=Oa(),h=B(_),g=O(h);g.value=((g.__value="")==null,"");var n=D(g);oe(n,17,r,le,(C,w)=>{var A=Da(),I={},T=O(A,!0);S(A),de(()=>{I!==(I=k(w))&&(A.value=(A.__value=k(w))==null?"":k(w)),he(T,k(w))}),N(C,A)}),S(h);var u=D(h,2);ie(u);var M=D(u,2);M.__click=function(...C){var w;(w=a.addTodo)==null||w.apply(this,C)},ya(h,s),Ce(u,t),N(v,_)};ge(b,v=>{k(l)=="category"?v(i):v(y,!1)})}S(c),S(p),N(e,p),fe()}qe(["click"]);var qa=R('<div class="group rounded-3xl bg-[#D6E6F2] p-4 transition duration-300 ease-in hover:bg-[#769FCD]"><div class="category-title w-full bg-[#769FCD] transition duration-300 ease-out group-hover:bg-[#D6E6F2]"> </div> <!></div>'),La=R('<p class="text-2xl">ONE STEP AT A TIME</p> <!> <div class="grid grid-cols-1 gap-4 md:grid-cols-3"></div>',1),Ua=R("<div><!></div>");function Pa(e,a){ve(a,!0);const[r,s]=Le(),t=()=>Ue(Fe,"$currentUser",r);let l=F(""),o=F(1),d=F(""),p=F(U([])),m=F(U({}));we(()=>{f()}),we(()=>{console.log("category: ",k(l))});async function f(){var y;if((y=t())!=null&&y.uid){const v=re(W,"todos",t().uid),_=await xe(v);if(!_.exists())throw new Error("Data does not exists!");const g=_.data();L(p,U(Object.keys(g).sort()));const n=k(p).reduce((u,M)=>(u[M]=g[M],u),{});L(m,U(n))}else console.error("No user is logged in.")}async function E(){var y;if((y=t())!=null&&y.uid&&k(l)&&k(o))try{const v=re(W,"todos",t().uid),_={[`${k(l)}.${k(o)}`]:{task:k(d),status:!1}};if(k(m)==null){const h=da(W);h.set(v,_),await h.commit()}else await Ee(v,_);ia(o),f()}catch(v){throw new Error("Unable to add record to db: ",v.stack)}else console.error("No user is logged in.")}async function c(y,v){var _,h,g;if((_=t())!=null&&_.uid&&v&&y)try{const n=re(W,"todos",t().uid),u=await xe(n);if(u.exists()){const C=(g=(h=u.data()[v])==null?void 0:h[y])==null?void 0:g.status,w={[`${v}.${y}.status`]:!C};await Ee(n,w)}}catch(n){throw new Error("Unable to update record in db: ",n.stack)}f()}var b=Ua(),i=O(b);xa(i,{children:(y,v)=>{var _=La(),h=D(B(_),2);Ma(h,{addTodo:E,get sortedCategories(){return k(p)},set sortedCategories(n){L(p,U(n))},get category(){return k(l)},set category(n){L(l,U(n))},get taskName(){return k(d)},set taskName(n){L(d,U(n))}});var g=D(h,2);oe(g,21,()=>Object.entries(k(m)),le,(n,u,M,C)=>{let w=()=>k(u)[0],A=()=>k(u)[1];var I=qa(),T=O(I),Y=O(T,!0);S(T);var j=D(T,2);{var X=H=>{var $=ne(),z=B($);oe(z,17,()=>Object.entries(A()).sort(([V,G],[me,J])=>Number(G.status)-Number(J.status)),le,(V,G)=>{let me=()=>k(G)[0],J=()=>k(G)[1];Na(V,{get id(){return me()},get key(){return w()},get value(){return J()},handleStatusChange:c})}),N(H,$)};ge(j,H=>{A()&&Object.entries(A()).length>0&&H(X)})}S(I),de(()=>he(Y,w())),N(n,I)}),S(g),N(y,_)}}),S(b),N(e,b),fe(),s()}export{Pa as component};
